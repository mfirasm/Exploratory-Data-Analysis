Exploring White Wine Dataset with R by Mohamed Firas M.
========================================================
```{r global_options, include=FALSE}
knitr::opts_chunk$set(echo=FALSE, warning=FALSE, message=FALSE)

```

```{r echo=FALSE, message=FALSE, warning=FALSE, packages}
# Load all of the packages that you end up using in your analysis in this code
# chunk.

# Notice that the parameter "echo" was set to FALSE for this code chunk. This
# prevents the code from displaying in the knitted HTML output. You should set
# echo=FALSE for all code chunks in your file, unless it makes sense for your
# report to show the code that generated a particular plot.

# The other parameters for "message" and "warning" should also be set to FALSE
# for other code chunks once you have verified that each plot comes out as you
# want it to. This will clean up the flow of your report.
library(ggplot2)
library(dplyr)
library(grid)
library(gridExtra)
library(GGally)
library(lsr)
```

```{r echo=FALSE, warning=FALSE, message=FALSE, Load_the_Data}
# Load the Data
df<-read.csv('wineQualityWhites.csv')
```

>**White Wine Quality** the data was downloaded from the following site:[White Wine Quality]( https://s3.amazonaws.com/udacity-hosted-downloads/ud651/wineQualityWhites.csv.) as project 6 of Data Analyst for Enterprise Nanodegree Program


# Univariate Plots Section


```{r echo=FALSE, warning=FALSE, message=FALSE, Univariate_Plots_2}
#check the dimensions of the dataset
dim(df)
```



```{r echo=FALSE, warning=FALSE, message=FALSE, Univariate_Plots_1}
names(df)

```
**Description of attributes:**


   1 - fixed acidity: most acids involved with wine or fixed or nonvolatile (do not evaporate readily)

   2 - volatile acidity: the amount of acetic acid in wine, which at too high of levels can lead to an unpleasant, vinegar taste

   3 - citric acid: found in small quantities, citric acid can add 'freshness' and flavor to wines

   4 - residual sugar: the amount of sugar remaining after fermentation stops, it's rare to find wines with less than 1 gram/liter and wines with greater than 45 grams/liter are considered sweet

   5 - chlorides: the amount of salt in the wine

   6 - free sulfur dioxide: the free form of SO2 exists in equilibrium between molecular SO2 (as a dissolved gas) and bisulfite ion; it prevents microbial growth and the oxidation of wine

   7 - total sulfur dioxide: amount of free and bound forms of S02; in low concentrations, SO2 is mostly undetectable in wine, but at free SO2 concentrations over 50 ppm, SO2 becomes evident in the nose and taste of wine

   8 - density: the density of water is close to that of water depending on the percent alcohol and sugar content

   9 - pH: describes how acidic or basic a wine is on a scale from 0 (very acidic) to 14 (very basic); most wines are between 3-4 on the pH scale

   10 - sulphates: a wine additive which can contribute to sulfur dioxide gas (S02) levels, wich acts as an antimicrobial and antioxidant

   11 - alcohol: the percent alcohol content of the wine

   Output variable (based on sensory data): 
   12 - quality (score between 0 and 10)
   


**explore the data **

```{r echo=FALSE, warning=FALSE, message=FALSE, Univariate_Plots}
str(df)

```
there are aa 4898 observations and 13 variables but we can find that X variables is a counter for observation ,it is better to dropped it 

```{r echo=FALSE, warning=FALSE, message=FALSE,explore_data}
# drop X as it is just ounter 
df = subset(df,select = -X)
```

since Quality are a measure we should change the Quality Variables to the   ordinal catagorical  variable 

quality  factorize it 
```{r echo=FALSE, warning=FALSE, message=FALSE}
df$quality.cat <- ordered(df$quality)
str(df$quality.cat)
```
**print statistical summary for the data ** 

```{r echo=FALSE, warning=FALSE, message=FALSE}
# print summary of the Data
summary(df)

```

# Univariate Analysis

### Frequncy of the quality of the wine
 the meausr of quality is between 3 to 9  , looking how the observation 's quality are  distrbuite 
 
 
```{r echo=FALSE, message=FALSE, warning=FALSE}
ggplot(aes(x = quality), data = df) + geom_histogram() + 
  scale_x_continuous(breaks = seq(2, 10, 1))
```

frequncy of the quality of the wine in table

```{r echo=FALSE, message=FALSE, warning=FALSE}
#count how many wines are qualified by the ratings
table(df$quality)
```


The distribution of the quality of wine looks normal the lowestquality are 3 and hight are 9, there is no 1,2 or 10 marks for rating it is better to bucket the quality to 3 class ( Low ,Average , High )  



```{r echo=FALSE, message=FALSE, warning=FALSE }
df$quality.bucket <- cut(df$quality, breaks = c(2, 4, 7, 10), labels = c('Low','Average','High'))

df$quality.bucket <- as.factor(df$quality.bucket)
qplot(x=quality.bucket, data = df  ,  fill = I('red'))
```




The first thing to look for  alcoholic beverages is alcohol percent . /n 


**alcohol** 

An appropriate level of alcohol enhances the flavor, but more of it could give you low quality . The median is 10.4% and the majority of values fall between 9% to 13%.

```{r echo=FALSE, message=FALSE, warning=FALSE}
ggplot(aes(x = alcohol), data = df)+
  geom_histogram(binwidth = 0.10)+
  scale_x_continuous(breaks = seq(8,14,0.5))
```

**PH** 

PH has a small range between 2.7 to 3.8 which mean  acetic!

```{r, echo=FALSE, messages=FALSE, warnings=FALSE }
#plot the distribution of ph
ggplot(aes(pH), data = df) + 
  geom_histogram(binwidth = 0.05)
```


**Fixed acidity** 

The basic histogram shows that fixed acidity has really few values less than 3 and a long tail after 10. So I limit the x axis range. Changing binwidth also shows more clearly that the majority of the fixed acidities fall between 5.5 and 8.5.


```{r  echo=FALSE, warning=FALSE, message=FALSE , Univariate_Fixed_Acidity}
hist1 = ggplot(aes(x = fixed.acidity), data = df) +   geom_histogram() + ggtitle("Basic")

hist2 = ggplot(aes(x = fixed.acidity), data = df) +   geom_histogram( binwidth = 0.01 , color = "red", fill = "red") + scale_x_continuous(limits = c(3, 10), breaks = seq(5.5, 8.5, 1)  )

grid.arrange(hist1, hist2)

```
The distribution of acidity is very close to normal distribution. But there
exist some outliers in the data. 


```{r echo=FALSE, messages=FALSE, warnings=FALSE , Univariate_Fixed_Acidity_1}
summary(df$fixed.acidity)
```

**volatile acidity** 

volatile acidity (acetic acid - g / dm3): the amount of acetic acid in wine, which at too high of levels can lead to an unpleasant, vinegar taste


```{r echo=FALSE, messages=FALSE, warnings=FALSE , Univariate_volatile.acidity_1}
grid.arrange(ggplot(aes(x = volatile.acidity), data = df) + 
  geom_histogram(),
  ggplot(aes( x = 1, y = volatile.acidity ), data = df ) + 
               geom_jitter(alpha = 0.1 ) +
               geom_boxplot(alpha = 0.2, color = 'red' ), ncol = 2)
```
change the histogram to get clear picture 

```{r echo=FALSE, messages=FALSE, warnings=FALSE , Univariate_volatile.acidity_2}
ggplot(aes(x = volatile.acidity), data = df) + 
  geom_histogram(binwidth = 0.01) + 
  scale_x_continuous(breaks = seq(0,1.1, 0.1))

```

```{r echo=FALSE, messages=FALSE, warnings=FALSE , Univariate_volatile.acidity}
summary(df$volatile.acidity)

```



**Citric.acid** 


The citric acid distribution looks quite normal with a median of 0.32 and a mean of 0.3342. and  there is a peak too  at around 0.5.

```{r echo=FALSE, messages=FALSE, warnings=FALSE , Univariate_citric.acid}
ggplot(aes(x = citric.acid), data = df) + 
  geom_histogram(binwidth = 0.01) + 
  scale_x_continuous(breaks = seq(0.1,1.5,0.1), 
                     limits = c(0, quantile(df$citric.acid, 0.99)))
```



```{r echo=FALSE, messages=FALSE, warnings=FALSE , Univariate_citric.acid_1}
summary(df$citric.acid)
```

**Residual Sugar** 

Residual sugar has a wide range between 0.6-65.8g/l while the median is only 5.2g/l. This is because wine producers try to cater to varying consumers’ preference of sweetness. Some people like me favor sweet wines, while others might prefer bone dry.


```{r echo=FALSE, messages=FALSE, warnings=FALSE , Univariate_residual.sugar}
ggplot(aes(x = residual.sugar), data = df) + 
  geom_histogram(binwidth = 0.1) +  ggtitle("Before Adjusting ")


```
After adjusting the histogram 

```{r echo=FALSE}
#histogram of residual sugar
ggplot(aes(residual.sugar), data = df) +
  geom_histogram(binwidth = 0.1) +
  coord_cartesian(xlim = c(0, 20))  + ggtitle("Residual Sugar")
```

**chlorides** 

Most wines has an amount of sodium chloride between 0.025-0.06g/l, with a median of 0.043g/l. The highest level in this dataset is 0.346g/l. 

Looks like there are some outliers in this distribution. 


```{r, echo= FALSE, message=FALSE, warning=FALSE}
ggplot(df, aes(y = chlorides, x = 1)) + geom_boxplot(color = 'red') +
  geom_jitter(aes(x = 1, y = chlorides), alpha = 0.1) + 
  geom_boxplot(color = 'red', alpha = 1/2) + coord_flip()


```




**Sulphate**

sulphate distribution plots seem approximately normal, with a median of 0.4700 and a mean of 0.4898. Again in this second plot we are dropped the top and bottom 1% of sulphate values. These plots seem slightly  bimodal or trimodal, however, I don't really know. The peaks seem too close together to classify this plot as bimodal, but maybe I should be considering the small scale of this data..

```{r echo=FALSE, message=FALSE ,warning=FALSE , sulphate1}
grid.arrange(ggplot(aes(x = sulphates), data = df) + 
  geom_histogram(),
ggplot(aes( x = 1, y = density ), data = df ) + 
               geom_jitter(alpha = 0.1 ) +
               geom_boxplot(alpha = 0.2, color = 'red' ), ncol = 2)
```


The data seem to be a bit right skewed. However, there exist very few outliers.
Let's narrow the bin sizes.

```{r echo=FALSE, message=FALSE ,warning=FALSE    }
ggplot(aes(x = sulphates), data = df) + geom_histogram(binwidth = 0.01)+  scale_x_log10()             
```
I transformed the scale to log10 to better visualize the distribution.

summery of sulphates : 

```{r echo=FALSE, message=FALSE ,warning=FALSE , sulphate3}
summary(df$sulphates)
```

**density** 


Most of the density values are between .99 and 1.00 g / cm3, but there are some outliers near 1.01 and 1.04. With a mean of 0.9937 and a median of 0.994.  distribution has a longer right tail than left tail, which can be seen more clearly in the first plot. 


```{r echo=FALSE,message=FALSE ,warning=FALSE, density1}
grid.arrange(ggplot(aes(x = density), data = df) + 
  geom_histogram(),
ggplot(aes( x = 1, y = density ), data = df ) + 
               geom_jitter(alpha = 0.1 ) +
               geom_boxplot(alpha = 0.2, color = 'red' ), ncol = 2)
```


summary of Density 

```{r echo=FALSE,message=FALSE ,warning=FALSE, density2}
summary(df$density)              
```



**Free.sulfur.dioxide** 



```{r echo=FALSE,message=FALSE ,warning=FALSE, free.sulfur.dioxide1}
grid.arrange(ggplot(aes(x = free.sulfur.dioxide), data = df) + 
  geom_histogram(),
ggplot(aes( x = 1, y = free.sulfur.dioxide ), data = df ) + 
               geom_jitter(alpha = 0.1 ) +
               geom_boxplot(alpha = 0.2, color = 'red' ), ncol = 2)
```

There exist so many outliers as most other features. We should trim the 
outliers to make better analysis. First, lets arrange binwidths to obtain
deeper insight.

```{r echo=FALSE,message=FALSE ,warning=FALSE, free.sulfur.dioxide2}
ggplot(aes(x = free.sulfur.dioxide), data = df) + geom_histogram(binwidth = 1)              
```

If we look also the summary statistics:

```{r echo=FALSE,message=FALSE ,warning=FALSE, free.sulfur.dioxide_summary3}

summary(df$free.sulfur.dioxide)
```


There exist extremely large variables similar to other variables. If the top 
1 percentile is omitted:

```{r echo=FALSE,message=FALSE ,warning=FALSE, free.sulfur.dioxide4}
ggplot(aes(x = free.sulfur.dioxide), data = df) + 
  geom_histogram(binwidth = 1) + 
  scale_x_continuous(limits = c(0, quantile(df$free.sulfur.dioxide,0.99)))
```

This time, the distribution is quite better and similar to normal. 
We can see that only very small amount of data have extreme values. 
The skewness in the data is very low.

**Total.sulfur.dioxide**

```{r echo=FALSE,message=FALSE ,warning=FALSE, total.sulfur.dioxide1}
grid.arrange(ggplot(aes(x = total.sulfur.dioxide), data = df) + 
  geom_histogram(),
ggplot(aes( x = 1, y = total.sulfur.dioxide ), data = df ) + 
               geom_jitter(alpha = 0.1 ) +
               geom_boxplot(alpha = 0.2, color = 'red' ), ncol = 2)
```


```{r echo=FALSE,message=FALSE ,warning=FALSE, total.sulfur.dioxide_Summary}
summary(df$total.sulfur.dioxide)
```


The data follows a pattern similar to previous variables. There exist 
extremely large variables and a few outliers but most of the data
has a bell-shaped normal-like distribution. If the top 1 percentile is
omitted the below distribution is obtained.


```{r echo=FALSE,message=FALSE ,warning=FALSE, total.sulfur.dioxide_last}
ggplot(aes(x = total.sulfur.dioxide), data = df) + 
  geom_histogram(binwidth = 1) +
  scale_x_continuous(limits = c(0, quantile(df$total.sulfur.dioxide, 0.99)))
```


Most of the data values are between 50 and 240.


```{r, echo= FALSE, message=FALSE, warning=FALSE ,free.sulfur.dioxide_ }

fsd = ggplot(df ,aes(x=free.sulfur.dioxide)) + geom_histogram()

fsd1 =  ggplot(df ,aes(x=free.sulfur.dioxide)) + scale_x_continuous(limits = 
c(quantile(df$free.sulfur.dioxide, 0.01),
  quantile(df$free.sulfur.dioxide, 0.99)))


tsd = ggplot(df ,aes(x=total.sulfur.dioxide)) + geom_histogram()

tsd1 = ggplot(df ,aes(x=total.sulfur.dioxide)) + geom_histogram() +
  scale_x_continuous(limits = c(quantile(df$total.sulfur.dioxide, 0.01),
  quantile(df$total.sulfur.dioxide, 0.99)))

grid.arrange(fsd, tsd, fsd1, tsd1 )

```

Both the distribution of free sulfur dioxide and total sulfur look like normal distributions. The free sulfur dioxide distribution has a mean of 35.31 and a median of 34.00, the total sulfur dioxide distribution has a mean of 138.4 and a median of 134.0. In both cases the mean is larger than the median, this difference is more noticeable in the distribution of total sulfur dioxide. In the total sulfur dioxide distribution it appears that width of distribution is larger for values above the meave rather than below the mean. So the free sulfur dioxide graph looks more normal.


###What is the structure of your dataset?
 4898 observations of wine with 12 variables
###What is/are the main feature(s) of interest in your dataset?
The main features in the data are  quality, alcohol, residual.sugar, density.

###What other features in the dataset do you think will help support your investigation into your feature(s) of interest?
Sulfur dioxide, citric acid, clorides.

###Did you create any new variables from existing variables in the dataset?
 create new quality variable quality.with 3 group  ( Low ,Average , High ) 
 


###Of the features you investigated, were there any unusual distributions? Did you perform any operations on the data to tidy, adjust, or change the form of the data? If so, why did you do this?

 citric acid has  two unusual peaks which standed out of an otherwise normal distribution.

I didlog transformation on the sulphates  distributions, because it was  skewed, and the transformations allowed better visualizations of the data.




# Bivariate Plots Section



in the first correlation matrix to see the realation between variables 

```{r , echo= FALSE, message=FALSE, warning=FALSE }

correlate(df)
```

```{r echo=FALSE, warning=FALSE, message=FALSE, Bivariate_Plots}
ggcorr(df, label = TRUE, hjust = .8, size = 3, layout.exp = 2)
```









there is a strong correlations between free sulfur dioxide, total sulfur dioxide and the constructed variables bound sulfur dioxide and sulfur dioxide ratio.

It also shows interesting relations between : 

1 -residual.sugar vs density
2-  and of course I am gioing to analysis the mean Feature Qulity with some intersting variabkes ()



**Density VS residual sugar**


```{r,echo= FALSE, message=FALSE, warning=FALSE , density_sugar_alcohol}

# function(x, y, xq1 = .00, xq2 = .99, yq1 = .00, yq2 = .99)
gg1 =  ggplot(df, aes_string("residual.sugar", "density")) +
    geom_jitter(alpha = 1/10) +
    coord_cartesian(xlim = c(quantile(df[,"residual.sugar"], 0), 
                             quantile(df[,"residual.sugar"], 0.999)),
                    ylim = c(quantile(df[,"density"], 0), 
                             quantile(df[,"density"], 0.999)))+
  geom_smooth(method = "lm") +
  coord_trans(x = "log10", 
              limx = c(quantile(df$residual.sugar, 0), 
                       quantile(df$residual.sugar, .999)), 
              limy = c(quantile(df$density, 0), 
                       quantile(df$density, .999)))

#biv_cont("alcohol", "density", 0, .999, 0, .999)

gg2=ggplot(df, aes_string("residual.sugar", "density")) +
    geom_jitter(alpha = 1/10) +
    coord_cartesian(xlim = c(quantile(df[,"residual.sugar"], 0), 
                             quantile(df[,"residual.sugar"], 0.99)),
                    ylim = c(quantile(df[,"density"], 0), 
                             quantile(df[,"density"], 0.999))) +
  geom_smooth(method = "lm")

grid.arrange(gg1,gg2, ncol = 2)
```

**alcohil vs density :**


There is a  strong negative correlation between density and alcohol.when the percent of alcohol increases the density will  decreases.

```{r echo= FALSE, message=FALSE, warning=FALSE  }
ggplot(aes(alcohol, density), data = df) +
  geom_point(position = 'jitter', alpha = 0.1)
```

**Alcohol VS Total.sulfur.dioxide:** 

This is a moderate positive correlation between density and total sulfur dioxide.
We have a moderate negative relationship between alcohol and total sulfur dioxide.


```{r , echo=FALSE , message=FALSE, warning=FALSE}
ggplot(aes(alcohol, total.sulfur.dioxide), data = df) +
  geom_point(position = 'jitter', alpha= 0.1)
```
**Free.sulfur.dioxide vs  Total.sulfur.dioxide : **


We observe a moderate positive correlation between total sulfur dioxide and free sulfur dioxide.

```{r echo=FALSE, message=FALSE, warning=FALSE}
ggplot(aes(free.sulfur.dioxide, total.sulfur.dioxide), data = df) +
  geom_point(position = 'jitter', alpha = 0.1) +
  xlim(0, quantile(df$total.sulfur.dioxide, 0.90))
```




**PH VS  Fixed.acidity :** 

```{r,echo=FALSE ,message=FALSE, warning=FALSE}

ggplot(aes(pH, fixed.acidity), data = df) +
  geom_point(position = 'jitter', alpha = 0.1)

```

 This correlation makes logical sense because as fixed acidity increases, the pH value becomes more acidic.
 

```{r echo=FALSE, message=FALSE, warning=FALSE}
#Create a scatterplot for fixed acidity and pH
ggplot(aes(x = fixed.acidity, y = pH), data = df) +
  geom_point(alpha = 1/5) +
  xlim(quantile(df$fixed.acidity, 0.01),
       quantile(df$fixed.acidity, 0.99)) +
  ylim(quantile(df$pH, 0.01),
       quantile(df$pH, 0.99))
```


**Density, Residual.sugar : **


```{r echo=FALSE, message=FALSE, warning=FALSE}
#plot the relationship between density and residual sugar and omit 1% of residual sugar
ggplot(aes(density, residual.sugar), data = df) +
  geom_point(position = 'jitter', alpha = 0.1) +
  ylim(0, quantile(df$residual.sugar, 0.99))
```

**Density, Total.sulfur.dioxide : **

This is a strong positive correlation between density and residual sugar. 

```{r echo=FALSE , message=FALSE, warning=FALSE}
ggplot(aes(density, total.sulfur.dioxide), data = df) +
  geom_point(position = 'jitter', alpha = 0.1)

```

**Quality VS Alcohol :**

There is a moderate positive correlation between alcohol and quality. We can see that as the alcohol increases the rating slightly increases as well.


```{r echo=FALSE,message=FALSE, warning=FALSE, Bivariate_Plots_quality_alcohol}

ggplot(aes(quality, alcohol), data = df) +
  geom_jitter(alpha = 0.1)
```

```{r echo=FALSE, message=FALSE, warning=FALSE }
qplot(x = quality.cat, y = alcohol, data = df, geom = "boxplot")
```

trying to apply  a linear model to the alcohol and quality scatterplot

```{r echo=FALSE, message=FALSE, warning=FALSE }

ggplot(aes(x = alcohol, y = quality.bucket), data = df) +
  geom_jitter(alpha = 1/10) + 
  geom_smooth(method = 'lm', color = 'red')
summary(lm(I(alcohol) ~ I(quality), data = df))
```

**Quality VS Sulphates:**

There is no meaningful relationship between sulphates and quality. This wine additive has no impact on quality. 


```{r echo=FALSE, message=FALSE, warning=FALSE}
#plot the sulphates vs quality
ggplot(aes(quality, sulphates), data = df) +
  geom_jitter(alpha = 0.1)

```


**Quality VS PH**

There is no Clear relationship between pH and quality. 


```{r echo=FALSE, message=FALSE, warning=FALSE}

#plot relationship between quality and pH
ggplot(aes(quality, pH), data = df) +
  geom_jitter(alpha = 0.1)
```




**Quality VS Density**

there is a small negative relationship between quality and density. As the density increases, the quality decreases. 

```{r echo=FALSE, message=FALSE, warning=FALSE}
#plot the relationship between quality and density
ggplot(aes(quality, density), data = df) +
  geom_jitter(alpha = 0.1)
```

```{r echo=FALSE, message=FALSE, warning=FALSE }
qplot(density, data = df, fill = quality.cat)
```



**Quality VS  Total.sulfur.dioxide :** 

there is a small negative relationship between total sulfur dioxide and quality. This means that as the total sulfur dioxide increases the quality decreases.

```{r echo=FALSE, message=FALSE, warning=FALSE}
#plot the relationship between quality and total sulfur dioxide
ggplot(aes(quality, total.sulfur.dioxide), data = df) +
  geom_jitter(alpha = 0.1)
```


**Quality VS Free.sulfur.dioxide : **

No clear relation between free sulfur dioxide and quality.

```{r echo=FALSE, message=FALSE, warning=FALSE}
#plot the relationship between free sulfur dioxide and quality
ggplot(aes(quality, free.sulfur.dioxide), data = df) +
  geom_jitter(alpha = 0.1)
```




**Quality VS Chlorides :**

There is a small negative correlation between chlorides and quality. If the amount of salt increases the quality decreases.

```{r echo=FALSE, message=FALSE, warning=FALSE}
#plot the relationship between chlorides and quality
ggplot(aes(quality, chlorides), data = df) +
  geom_point(position = 'jitter', alpha = 0.1) 
```



**Quality vs Residual.sugar : **

There is no meaningful relationship between residual sugar and quality.

```{r echo=FALSE, message=FALSE, warning=FALSE}
#plot the relationship between residual sugar and quality
ggplot(aes(quality, residual.sugar), data = df) +
  geom_point(position = 'jitter', alpha = 0.1)
```



**quality VS citric.acid :**

There is no meaningful relationship between citric acid and quality.
```{r echo=FALSE, message=FALSE, warning=FALSE}
#plot the citric acid vs quality
ggplot(aes(quality, citric.acid), data = df) +
  geom_point(alpha = 0.1, position = 'jitter')
```
```{r echo=FALSE, message=FALSE, warning=FALSE, citric_acid_boxplot}
ggplot(aes(x = quality, y = citric.acid), data = df) +
  geom_boxplot(aes(group = quality)) +
  ylim(quantile(df$citric.acid, 0.01), quantile(df$citric.acid, 0.99))
```




**Quality VS  Volatile.acidity:**

Small negative correlation between volatile acidity and quality.

```{r echo=FALSE, message=FALSE, warning=FALSE}
#plot the relationship between volatile acidity and quality
ggplot(aes(quality, volatile.acidity), data = df) +
  geom_point(position = 'jitter', alpha = 0.1)
```



**Quality vs Fixed Acidity :**

There is no clear correlation between fixed acidity and quality.

```{r echo=FALSE}
#plot relationship between fixed acidity and quality
ggplot(aes(quality, fixed.acidity), data = df) +
  geom_point(position = 'jitter', alpha = 0.1)
```



# Bivariate Analysis



### Talk about some of the relationships you observed in this part of the \


I analyzed the  relationships between the variables in this dataset
The quality variable which is my main varivale has two largest correlations  with alcohol (.436) and density (-.307). and when I got closer to more detail in quality cat and  the alcohol level I fount 
increases from 3 to 5, the quality tends  downwards. As the alcohol level
increases from 5 to 9, the quality tends upwards.

### Did you observe any interesting relationships between the other features \

Density is strongly correlated with residual sugar and alcohol.

and there is a relationship  between fixed acidity and pH


### What was the strongest relationship you found?


The strongest correlations I found are between other features. Strong positive correlation between residual sugar and density, as the amount of sugar increases the density increases.
Another strong relationship was observed between density and alcohol.As the percent of alcohol increases the density decreases.





# Multivariate Plots Section


In this plot we can see that the average alcohol percent is higher for the wines with higher quality rating.


```{r echo=FALSE, message=FALSE, warning=FALSE, Multivariate_Plots}
#create boxplot to see the how the average looks like across the quality buckets
ggplot(aes(quality.cat, alcohol), data = df) +
  geom_boxplot() +
  stat_summary(fun.y = mean, geom = 'point', shape = 4)

```



```{r echo=FALSE, message=FALSE, warning=FALSE }

df$quality_grouped <- cut(df$quality, c(2,4,7,9))
ggplot(aes(x = alcohol, y = residual.sugar), data = df) +
  geom_point(aes(color = quality_grouped),
             stat = 'summary', fun.y = mean) +
  scale_color_brewer(type='seq',
                   guide=guide_legend(title='quality_grouped'))
```

When I add quality_grouped into alcohol-residual.sugar I observe that 
high-quality (dark blue points) wines generally have high level alcohol. 


```{r echo=FALSE, message=FALSE, warning=FALSE}
ggplot(aes(x = alcohol, 
           y = residual.sugar  , color = factor(quality)), 
       data = df) +
      geom_point(alpha = 0.8, size = 1) +
  ylim(quantile(df$residual.sugar, 0.01), quantile(df$residual.sugar, 0.99)) +
      geom_smooth(method = "lm", se = FALSE,size=1)  +
  scale_color_brewer(type='seq',
                   guide=guide_legend(title='Quality'))
```


An important implication of the graph is that high quality wines generally 
have low residual.sugar level (less than 5). However, low level of sugar does 
not mean high quality wines. There exist so many wine types which are low 
quality and includes low residual.sugar. /n 





I will change alcohol to bins to be able to plot density, alcohol, residual sugar and quality together and see how they relate with eachother:

```{r,echo=FALSE, message=FALSE, warning=FALSE, quality_levels}
df$quality.bins = with(df, 
                           cut(quality,
                               breaks = c(2, 4, 5, 6, 7, 9),
                               labels = c("[3, 4]", "5", "6", "7", "[8, 9]")))

ggplot(df, aes(residual.sugar, density, color = quality.bins)) +
  geom_point(alpha = 2/3) +
  geom_smooth(method = "lm", se = FALSE) +
  coord_trans(x = "log10", 
              limx = c(min(df$residual.sugar),
                       quantile(df$residual.sugar, .999)),
              limy = c(min(df$density),
                       quantile(df$density, .999))) +
  scale_color_brewer(type = 'seq',
                     palette = 'YlOrRd',
                     guide = guide_legend(title = 'Quality',
                                          reverse = T,
                                          override.aes = list(alpha = 1, 
                                                              size = 2)))
```

# Quality , density ,residual.sugar , Alchole 

```{r, echo=FALSE, message=FALSE, warning=FALSE}
ggplot(aes(x = residual.sugar, y = density), data = df) +
  geom_point(aes(color = alcohol), size = 0.8) + 
  coord_cartesian(xlim = c(0, 8.2 + 1.5), ylim = c(0.987, 1.005)) +
  facet_wrap(~quality)
```
 



```{r echo=FALSE, Multivariate_alcohol_density_0}
ggplot(aes(x = alcohol, 
           y = density  , color = factor(quality)), 
       data = df) + 
  ylim(quantile(df$density, 0.01), quantile(df$density, 0.99)) +
      geom_point(alpha = 0.8, size = 1) +
      geom_smooth(method = "lm", se = FALSE,size=1)  +
  scale_color_brewer(type='seq',
                   guide=guide_legend(title='Quality'))
```



```{r echo=FALSE}
ggplot(aes(total.sulfur.dioxide, alcohol, color = quality.cat), data = df) +
  geom_point() +
  scale_color_brewer(type = 'qual')
```

We observe here a moderate negative relationship between alcohol and total sulfur dioxide wrapped by quality, especially for the wines that are rated above 5.


**fixed.acidity and  pH,  quality.cat**


```{r echo=FALSE, message=FALSE, warning=FALSE}
ggplot(aes(fixed.acidity, pH, color = quality.cat), data = df) + 
  geom_jitter() +
  scale_color_brewer(type = 'qual')
```

This plot shows pH for each quality in relationship with fixed acidity.




# Multivariate Analysis

### Talk about some of the relationships you observed in this part of the \
There is a very interesting relation between density, alcohol, residual sugar and quality. when  quality increases as alcohol increases, density decreases and residual sugar decreases.

These variables were amongst the most important ones .

### Were there any interesting or surprising interactions between features?



Higher rated wines have a lower total sulfur dioxide, which means that in low concentrations sulfur dioxide is mostly undetectable.

Higher rated wines have a lower amount of sugar than the other rated categories.


### OPTIONAL: Did you create any models with your dataset? Discuss the \
strengths and limitations of your model.

------

# Final Plots and Summary


### Plot One


```{r echo=FALSE, warning=FALSE, message=FALSE, Plot_One}
df$alcohol.bins <- with(df, cut(alcohol, 4))

ggplot(df, aes(residual.sugar, density, color = alcohol.bins)) +
  geom_point(alpha = 1/2) +
  geom_smooth(method = "lm") +
  coord_trans(x = "log10", 
              limx = c(min(df$residual.sugar),
                       quantile(df$residual.sugar, .999)),
              limy = c(min(df$density),
                       quantile(df$density, .999))) +
  scale_color_brewer(type = 'seq',
                     palette = 'YlOrRd',
                     guide = guide_legend(title = 'Alcohol Bins (% by volume)',
                                          reverse = T,
                                          override.aes = list(alpha = 1, 
                                                              size = 2))) +
  ggtitle("Relation between density, residual sugar and alcohol") +
  xlab("Residual Sugar (g / dm^3)") +
  ylab("Density (g / cm^3)")
``` 
                                                                         



### Description One
A very interesting relation is shown in this chart. Given a value of residual sugar, density increases as alcohol decreases. This is in some extent due to the fermentation process of winemaking, in which sugar is consumed to generate alcohol. Since alcohol is less dense than water and sugar is more dense than water, this process makes the density of the wine decrease.



### Plot Two

```{r echo=FALSE, warning=FALSE, message=FALSE, Plot_Two}
df$alcohol_grouped <- cut(df$alcohol, c(7.50, 9 ,10.50, 12, 16))
ggplot(aes(x = factor(quality),
           y = volatile.acidity ), 
           data = df) + 
   geom_boxplot( aes(fill= alcohol_grouped))  +
  scale_fill_brewer(type='seq',
                   guide=guide_legend(title='alcohol_grouped')) +
  ggtitle('Wine Quality Volatile Acidity by Alcohol Graph') + 
  labs(x = "volatile acidity (acetic acid - g / dm^3)", 
       y = "quality (score between 0 and 10)")
```


### Description Two
The graph shows that there exist a negative relationship betwwen 
volitile acidity and quality. We can also observe that high quality 
wines include high alcohol level. Furthermore, it can be seen that the 
seperation of alcohol in high volatile acidity increases.  



### Plot Three
```{r echo=FALSE,warning=FALSE, message=FALSE, Plot_Three}

ggplot(aes(x = alcohol, y = residual.sugar), data = df) + 
  geom_point(alpha = 0.1, position = position_jitter(h=0), color = 'orange') +
  ylim(0, quantile(df$residual.sugar,0.95)) +
  coord_trans(y = 'sqrt') +
  geom_smooth()  + ggtitle('Alcohol Residual Sugar Graph') + 
  labs(x = "alcohol (% by volume)", y = "redidual sugar (g / dm^3)")

```

### Description Three

The negative relationship between alcohol and residual sugar is deteched. 
Although the variance is quite high, the smoothing curve shows the average 
residual sugar by alcohol. It is interesting to see that residual.sugar 
decreased by increasing alcohol significantly. 

------

# Reflection

on this  exploratory data analysis we did 3 steps 
1 -a univariate,
2-bivariate and 
3- finally multivariate

I did exmaine the variable and realtionships between them 
there was Some interesting relations came up, like the one between alcohol, density, residual sugar and quality, that could be related to the fermentation process of wine. The correlation between pH and fixed acidity, while not correlating with volatile acidity and citric acids is also worth noting.

The challenges I enocountered were the fact the variables were not clearly explained as they represent chemical properties.


I think it would be interesting to have more even-classed dataset. More low and high quality wines to better visualize these trends.  In addition to that I think it would be interesting to see the price of the wine too, 

Also the analyze I  did  depended on relationships between correlating variables, but there are for sure a  non correlating  factors that still need more investigation in terms in chemical and Psychologically factors that affect the quality of wine
